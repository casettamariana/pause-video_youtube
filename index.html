<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="style.css">
    </head>
  <body onload="on()">
    <!-- 1. O <iframe> (e o player de vídeo) substituirá esta tag <div>. -->
    <div class="grid">
        <div class="next"></div>
        <div class="back"></div>
        <div id="video_pilula_1"></div>
        <div id="video_pilula_2"></div>
        <div id="video_pilula_3"></div>
    </div>


    <div onclick="stopVideo()">STOP VIDEO</div>

    <script>
      // 2. Este código carrega o código IFrame Player API de forma assíncrona.
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3. Esta função cria um <iframe> (e um player do YouTube)
      //    aapós o download do código API.
      var pilula_1;
      var pilula_2;
      var pilula_3;
      function onYouTubeIframeAPIReady() {
        pilula_1 = new YT.Player('video_pilula_1', {
          height: '360',
          width: '640',
          videoId: 'Qnzub8HtzJg',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
        pilula_2 = new YT.Player('video_pilula_2', {
          height: '360',
          width: '640',
          videoId: 'BeweyC0uM_M',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
        pilula_3 = new YT.Player('video_pilula_3', {
          height: '360',
          width: '640',
          videoId: 'axFl6MG84ts',
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
      }

      // 4. A API irá chamar esta função quando o player de vídeo estiver pronto.
      function onPlayerReady(event) {
        event.target.playVideo();
      }

      // 5. A API chama essa função quando o estado do player muda. 
      // A função indica que ao reproduzir um vídeo (estado = 1), 
      // o jogador deve jogar por seis segundos e então parar.
      var done = false;
      function onPlayerStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING && !done) {
          setTimeout(stopVideo, 6000);
          done = true;
        }
      }
      function stopVideo() {
        pilula_1.stopVideo();
        pilula_2.stopVideo();
        pilula_3.stopVideo();
      }
    
      function on(){
          var pil_1 = document.getElementById('video_pilula_1');
          pil_1.className += "ADDCLASS"; 
      }
    </script>
  </body>
</html>